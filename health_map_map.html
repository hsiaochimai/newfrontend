<!DOCTYPE html>
<html>
<body>


<h1>Oregon Hospitals</h1>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAKCwoT2QjZr1Kg9w4UNZ7E148wB9M1hrg&libraries=places&callback=initMap"
        async defer></script>
<script>

<div style="display: none">
    <input id="pac-input"
           class="controls"
           type="text"
           placeholder="Enter a location">
</div>
<div id="map"></div>
<div id="infowindow-content">
    <span id="place-name" class="title"></span><br>
    <strong>Place ID:</strong> <span id="place-id"></span><br>
    <span id="place-address"></span>
</div>




<div id="googleMap" style="width:100%;height:400px;"></div>

//uses load function to get file with lat/long
map.data.loadGeoJson('test_data.json');

  function myMap() {
  var mapProp= {
    center:new google.maps.LatLng(44.037632, -120.513740), //TODO currently center of OR; update these coordinates to be center average of all OR hospitals?
    zoom:5,
  };

//make new map using Map()
//general syntax: new google.maps.Map(HTMLElement, MapOptions);
var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);

//marker that is location of hospital within specified radius
var marker = new google.maps.Marker({position: myCenter, animation:google.maps.Animation.BOUNCE});
marker.setMap(map);

//zooms on marker when user clicks
google.maps.event.addListener(marker,'click',function() {
  map.setZoom(9);
  map.setCenter(marker.getPosition());
});

//save zoom changes and pan map back after 3 seconds
google.maps.event.addListener(marker,'click',function() {
  var pos = map.getZoom();
  map.setZoom(9);
  map.setCenter(marker.getPosition());
  window.setTimeout(function() {map.setZoom(pos);},3000);
});

//infowindow opens when clicking on specific marker
var infowindow = new google.maps.InfoWindow({
  content:"Hello World!"
});
//get list of place IDs using place ID from .json file
var request = {
  placeId: 'ChIJS0FKKwQellQR1VtAUfyS-C4',
  fields: ['input_string', 'formatted_address']
};

service = new google.maps.places.PlacesService(map);
service.getDetails(request, callback);

function callback(place, status) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    createMarker(place);
  }

function callback(place, status) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    createMarker(place);
  }
}

google.maps.event.addListener(marker, 'click', function() {
  infowindow.open(map,marker);
});

google.maps.event.addListener(map, 'click', function(event) {
  placeMarker(map, event.latLng);
});


}

</script>




</body>
</html>
